-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
local Proxy = module("vrp","lib/Proxy")
vRP = Proxy.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONEX√ÉO
-----------------------------------------------------------------------------------------------------------------------------------------
src = {}
Tunnel.bindInterface("vrp_pecas",src)
vSERVER = Tunnel.getInterface("vrp_pecas")
-----------------------------------------------------------------------------------------------------------------------------------------
-- LOCALIDADES
-----------------------------------------------------------------------------------------------------------------------------------------
local localidades = {
	{ 387.51,3584.73,33.3 }
}
-----------------------------------------------------------------------------------------------------------------------------------------
-- OPENSHOP
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterCommand('pvender',function(source,args)
	SetNuiFocus(false,false)
	for _,mark in pairs(localidades) do
		local ped = PlayerPedId()
		local x,y,z = table.unpack(mark)
		local distance = GetDistanceBetweenCoords(GetEntityCoords(PlayerPedId()),x,y,z,true)
		if distance <= 2.3 and vSERVER.checkSearch() then
			SetNuiFocus(true,true)
			SendNUIMessage({ action = "showMenu" })
		end
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- SHOPCLOSE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("shopClose",function(data)
	SetNuiFocus(false,false)
	SendNUIMessage({ action = "hideMenu" })
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- PECASLIST
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("pecasList",function(data,cb)
	local shopitens = vSERVER.pecasList()
	if shopitens then
		cb({ shopitens = shopitens })
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- SHOPSELL
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("shopSell",function(data)
	if data.index ~= nil then
		vSERVER.shopSell(data.index,data.price,data.amount)
	end
end)